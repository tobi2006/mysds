{% extends "base.html" %}
{% load custom_filters %}

{% block title %}CCCU Law - {{current_module}}{% endblock %}

{% block content %}

{% url "attendance" as action_url%}

<h2>
    Attendance for {{ current_module.title }} ({{ current_module.year }}) {% if seminar_group %} - Seminar Group {{ seminar_group }}{% endif %}
</h2>

<form action="{{ action_url }}" id="absenceForm" method="post"> 
{% csrf_token %}

<table id ="sortable_table" class="table table-striped table-sortable">
    <thead>
        <tr>
            <th>
                Student
            </th>
            {% for session in sessions %}
            <th>
                {{ session | add:"+1" }}
            </th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
    {% for student, attendance in attendances.items|sort %}
        <tr>
            <td>
                <label>{{ student.last_name }}, {{ student.first_name }}</label>
            </td>
            {% for session in sessions %}
            <td>
                <input type="checkbox" value="{{ session }}" name="{{ student.student_id }}" {% if attendance|get_directory_item:session %}checked{% endif %}>
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<input type="hidden" name="option" value="" id="btn-input" />

<input type="submit" value="Submit Attendance Sheet" class="btn btn-primary" align=right>

</form>

{% endblock %}
